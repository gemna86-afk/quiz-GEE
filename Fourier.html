<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analyse de Fourier - Quiz Interactif</title>
    <!-- Chargement de Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Configuration des polices -->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f9fb; /* Arri√®re-plan clair */
        }
        /* Style de base pour les boutons de r√©ponse */
        .option-button {
            transition: all 0.2s;
            cursor: pointer;
        }
        /* Style lorsque la r√©ponse est s√©lectionn√©e */
        .selected {
            border-color: #4f46e5; /* indigo-600 */
            background-color: #e0e7ff; /* indigo-100 */
            color: #4338ca; /* indigo-700 */
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
        }
        /* Style pour la r√©ponse correcte */
        .correct {
            border-color: #10b981; /* vert-500 */
            background-color: #d1fae5; /* vert-100 */
            color: #065f46; /* vert-800 */
        }
        /* Style pour la r√©ponse incorrecte */
        .incorrect {
            border-color: #f87171; /* rouge-400 */
            background-color: #fee2e2; /* rouge-100 */
            color: #991b1b; /* rouge-800 */
        }
    </style>
</head>
<body class="min-h-screen p-4 sm:p-8 flex items-center justify-center">

    <!-- Conteneur principal et carte du quiz -->
    <div class="w-full max-w-4xl">
        <header class="text-center mb-10">
            <h1 class="text-4xl sm:text-5xl font-extrabold text-indigo-700 mb-2">
                Le Spectre de Fourier
            </h1>
            <p class="text-xl text-gray-600">
                Explorez l'analyse harmonique de mani√®re interactive.
            </p>
        </header>

        <!-- Carte du Quiz -->
        <div id="quiz-card" class="bg-white rounded-3xl shadow-xl overflow-hidden p-6 sm:p-10 border border-gray-100">

            <div class="flex flex-col lg:flex-row gap-8">
                
                <!-- Section Information/Statistiques -->
                <div class="lg:w-1/3 p-4 bg-indigo-50 rounded-xl border border-indigo-100 shadow-inner h-fit">
                    <h2 class="text-2xl font-semibold text-indigo-600 mb-4 flex items-center">
                        <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                        Statistiques de l'Analyse
                    </h2>
                    <ul class="space-y-3 text-gray-700">
                        <li class="flex justify-between items-center text-sm font-medium">
                            <span>Questions Termin√©es:</span>
                            <span id="questions-completed" class="text-indigo-600 font-bold">0/7</span>
                        </li>
                        <li class="flex justify-between items-center text-sm font-medium">
                            <span>Score Actuel:</span>
                            <span id="score-percentage" class="text-green-600 font-bold">0%</span>
                        </li>
                        <li class="flex justify-between items-center text-sm font-medium">
                            <span>Domaine Actuel:</span>
                            <span id="current-domain" class="text-red-600 font-bold">Temporel</span>
                        </li>
                    </ul>
                </div>

                <!-- Section Question/Contenu -->
                <div id="quiz-content" class="lg:w-2/3">
                    
                    <!-- Contenu du Quiz (sera remplac√© par JS) -->
                    <h2 class="text-2xl font-bold text-gray-800 mb-4" id="section-title">
                        Bienvenue dans le Quiz de Fourier
                    </h2>
                    <p class="text-gray-600 mb-6" id="section-description">
                        Ce quiz couvre les concepts fondamentaux de la Transformation et des S√©ries de Fourier, de leurs origines physiques √† leurs applications modernes. Cliquez sur "D√©marrer le Quiz" pour commencer.
                    </p>

                    <!-- Zone pour la question -->
                    <div id="question-area" class="bg-gray-50 p-5 rounded-xl border border-gray-200 hidden">
                        <p class="text-lg font-semibold text-gray-800 mb-3" id="question-text">
                            <!-- Texte de la question inject√© ici -->
                        </p>
                        <!-- Options de r√©ponse inject√©es ici -->
                        <div class="space-y-3" id="options-container">
                            <!-- Les boutons seront inject√©s ici par JavaScript -->
                        </div>
                        
                        <!-- Zone de feedback pour l'utilisateur apr√®s la validation -->
                        <div id="feedback-message-area" class="mt-4 p-4 rounded-xl font-semibold text-lg hidden border border-gray-300">
                            <!-- Message de feedback inject√© ici -->
                        </div>
                    </div>

                    <!-- Zone pour le R√©sultat Final -->
                    <div id="results-area" class="hidden text-center p-8 bg-green-50 rounded-xl border-4 border-green-200">
                        <h3 class="text-3xl font-bold text-green-700 mb-4">Quiz Termin√© !</h3>
                        <p id="final-score-text" class="text-xl text-gray-700 mb-6">Votre score final est de X / Y (Z%).</p>
                        <p id="feedback-message" class="text-lg font-medium text-gray-800"></p>
                    </div>
                    
                    <!-- Bouton de navigation -->
                    <div class="mt-6 flex justify-end">
                        <button id="next-button" onclick="handleNextClick()" class="px-8 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition duration-300 shadow-lg shadow-indigo-300">
                            D√©marrer le Quiz
                        </button>
                    </div>

                </div>
            </div>

        </div>

        <!-- Pied de page simple -->
        <footer class="text-center mt-10 text-gray-500 text-sm">
            &copy; 2025 Analyse Harmonique. Propuls√© par la puissance des s√©ries.
        </footer>
    </div>

    <script>
        // D√©finition des questions du quiz
        const quizData = [
            {
                question: "Quel ph√©nom√®ne physique a initialement amen√© Fourier √† soup√ßonner le r√¥le des fonctions trigonom√©triques dans la d√©composition ?",
                options: [
                    "La trajectoire des plan√®tes",
                    "La propagation de la chaleur sur des corps solides", // Correct
                    "L'analyse des ondes sonores et de la lumi√®re"
                ],
                answerIndex: 1,
                domain: "Physique & Histoire",
                explanation: "Joseph Fourier a d√©velopp√© ses travaux sur les s√©ries pour r√©soudre l'√©quation de la chaleur. Il a d√©couvert que toute fonction, m√™me discontinue, pouvait √™tre d√©compos√©e en une somme de fonctions sinus et cosinus pour mod√©liser la distribution de la chaleur. "
            },
            {
                question: "La Transformation de Fourier (TF) fait passer le signal du domaine temporel au domaine :",
                options: [
                    "Spatial",
                    "Fr√©quentiel", // Correct
                    "Amplitude"
                ],
                answerIndex: 1,
                domain: "Concepts Fondamentaux",
                explanation: "La Transformation de Fourier d√©compose un signal en ses composantes sinuso√Ødales √† diff√©rentes fr√©quences. Le domaine fr√©quentiel (ou domaine de Fourier) montre l'amplitude de chaque fr√©quence pr√©sente dans le signal original."
            },
            {
                question: "Les S√©ries de Fourier sont exclusivement utilis√©es pour repr√©senter quel type de signaux ?",
                options: [
                    "Les signaux ap√©riodiques et transitoires",
                    "Les signaux al√©atoires",
                    "Les signaux p√©riodiques", // Correct
                ],
                answerIndex: 2,
                domain: "S√©ries de Fourier",
                explanation: "Les S√©ries de Fourier repr√©sentent les fonctions p√©riodiques comme une somme infinie d'harmoniques sinuso√Ødales. Pour les signaux ap√©riodiques, on utilise la Transform√©e de Fourier continue ou discr√®te."
            },
            {
                question: "En pratique, quel algorithme permet de calculer efficacement la Transform√©e de Fourier Discr√®te (TFD) ?",
                options: [
                    "L'algorithme de Dijkstra",
                    "La Transform√©e en Ondelettes Discr√®tes (TOD)",
                    "La Transform√©e de Fourier Rapide (FFT)", // Correct
                ],
                answerIndex: 2,
                domain: "Calcul Num√©rique",
                explanation: "La FFT (Fast Fourier Transform) est un algorithme qui r√©duit le temps de calcul de la TFD de $O(N^2)$ √† $O(N \log N)$, la rendant utilisable en temps r√©el dans de nombreuses applications."
            },
            {
                question: "Quelle op√©ration dans le domaine fr√©quentiel correspond √† l'op√©ration de convolution dans le domaine temporel/spatial (Th√©or√®me de Convolution) ?",
                options: [
                    "La multiplication simple", // Correct
                    "L'int√©gration",
                    "La soustraction"
                ],
                answerIndex: 0,
                domain: "Propri√©t√©s",
                explanation: "Le Th√©or√®me de Convolution est fondamental : la convolution de deux signaux dans un domaine √©quivaut √† la multiplication de leurs transform√©es de Fourier dans l'autre domaine. Ceci simplifie grandement l'analyse et le filtrage des syst√®mes."
            },
            {
                question: "En imagerie (2D), le centre du spectre de Fourier repr√©sente habituellement :",
                options: [
                    "Les hautes fr√©quences (d√©tails fins)",
                    "Les basses fr√©quences (information globale et moyenne)", // Correct
                    "Le bruit al√©atoire uniquement"
                ],
                answerIndex: 1,
                domain: "Applications (Imagerie)",
                explanation: "Le centre du spectre (fr√©quence nulle) contient l'information de base et la luminosit√© moyenne de l'image. Les basses fr√©quences d√©terminent les contours larges, tandis que les hautes fr√©quences, plus √©loign√©es du centre, repr√©sentent les d√©tails fins et les textures."
            },
            {
                question: "Que repr√©sente l'amplitude d'un pic dans le spectre de Fourier ?",
                options: [
                    "La phase de l'onde",
                    "La fr√©quence d'√©chantillonnage du signal",
                    "L'intensit√© ou l'√©nergie de cette composante sinuso√Ødale", // Correct
                ],
                answerIndex: 2,
                domain: "Interpr√©tation du Spectre",
                explanation: "Dans le spectre, l'axe des ordonn√©es (amplitude) indique la quantit√© (ou l'√©nergie) de cette fr√©quence particuli√®re pr√©sente dans le signal original. Plus le pic est haut, plus cette fr√©quence est 'importante'."
            }
        ];

        // Variables d'√©tat
        let currentQuestionIndex = 0;
        let score = 0;
        let isAnswerSelected = false;
        let selectedOptionIndex = null;
        const totalQuestions = quizData.length;

        // R√©f√©rences aux √©l√©ments du DOM
        const questionsCompletedSpan = document.getElementById('questions-completed');
        const scorePercentageSpan = document.getElementById('score-percentage');
        const currentDomainSpan = document.getElementById('current-domain');
        const questionTextP = document.getElementById('question-text');
        const optionsContainerDiv = document.getElementById('options-container');
        const nextButton = document.getElementById('next-button');
        const questionArea = document.getElementById('question-area');
        const resultsArea = document.getElementById('results-area');
        const sectionTitle = document.getElementById('section-title');
        const sectionDescription = document.getElementById('section-description');
        const quizContent = document.getElementById('quiz-content');
        const feedbackMessageArea = document.getElementById('feedback-message-area'); // R√©f√©rence au nouvel √©l√©ment

        /**
         * Met √† jour le panneau des statistiques.
         */
        function updateStats() {
            const currentCount = Math.min(currentQuestionIndex, totalQuestions);
            
            questionsCompletedSpan.textContent = `${currentCount}/${totalQuestions}`;
            
            let percentage = 0;
            if (currentCount > 0) {
                percentage = Math.round((score / currentCount) * 100);
            }
            if (currentQuestionIndex === totalQuestions) {
                // Si le quiz est termin√©, calcule le score final
                percentage = Math.round((score / totalQuestions) * 100);
            }
            scorePercentageSpan.textContent = `${percentage}%`;

            if (currentQuestionIndex < totalQuestions) {
                currentDomainSpan.textContent = quizData[currentQuestionIndex].domain;
            } else {
                currentDomainSpan.textContent = "Termin√©";
            }
            
            scorePercentageSpan.classList.remove('text-green-600', 'text-red-600', 'text-yellow-600');
            if (percentage >= 75) {
                scorePercentageSpan.classList.add('text-green-600');
            } else if (percentage >= 40) {
                scorePercentageSpan.classList.add('text-yellow-600');
            } else {
                scorePercentageSpan.classList.add('text-red-600');
            }
        }

        /**
         * Charge la question actuelle dans l'interface.
         */
        function loadQuestion() {
            // S'assurer que les zones de questions sont visibles et les r√©sultats cach√©s
            questionArea.classList.remove('hidden');
            resultsArea.classList.add('hidden');
            
            // Cacher et vider la zone de feedback
            feedbackMessageArea.classList.add('hidden');
            feedbackMessageArea.innerHTML = '';

            const currentQ = quizData[currentQuestionIndex];
            
            // Mise √† jour du texte
            sectionTitle.textContent = `Question ${currentQuestionIndex + 1} de ${totalQuestions}`;
            sectionDescription.textContent = currentQ.domain;
            questionTextP.textContent = currentQ.question;
            
            optionsContainerDiv.innerHTML = ''; // Nettoyer les options pr√©c√©dentes
            
            // Cr√©er les boutons d'options
            currentQ.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-button w-full text-left p-3 border-2 border-gray-300 bg-white text-gray-700 rounded-lg hover:bg-gray-100 transition duration-150 shadow-sm font-medium';
                button.textContent = option;
                button.dataset.index = index;
                button.onclick = () => selectOption(index, button);
                optionsContainerDiv.appendChild(button);
            });

            // R√©initialiser l'√©tat pour la nouvelle question
            nextButton.textContent = 'Valider la R√©ponse';
            nextButton.disabled = true;
            nextButton.classList.add('opacity-50');
            isAnswerSelected = false;
            selectedOptionIndex = null;
            updateStats();
        }

        /**
         * G√®re la s√©lection d'une option par l'utilisateur.
         * @param {number} index - Index de l'option s√©lectionn√©e.
         * @param {HTMLButtonElement} button - Le bouton cliqu√©.
         */
        function selectOption(index, button) {
            if (isAnswerSelected) return; // Emp√™che de changer la s√©lection apr√®s la validation

            // D√©s√©lectionner toutes les options
            document.querySelectorAll('.option-button').forEach(btn => {
                btn.classList.remove('selected');
                btn.classList.add('border-gray-300', 'bg-white', 'text-gray-700');
                btn.classList.remove('border-indigo-300', 'bg-indigo-100', 'text-indigo-800', 'shadow-lg');
            });

            // S√©lectionner le bouton cliqu√©
            button.classList.add('selected');
            button.classList.remove('border-gray-300', 'bg-white', 'text-gray-700');
            button.classList.add('border-indigo-300', 'bg-indigo-100', 'text-indigo-800', 'shadow-lg');

            selectedOptionIndex = index;
            nextButton.disabled = false;
            nextButton.classList.remove('opacity-50');
        }

        /**
         * V√©rifie la r√©ponse et met √† jour le score et l'interface, incluant l'explication.
         */
        function checkAnswer() {
            if (isAnswerSelected || selectedOptionIndex === null) return;
            isAnswerSelected = true;

            const currentQ = quizData[currentQuestionIndex];
            const isCorrect = selectedOptionIndex === currentQ.answerIndex;
            const correctAnswerText = currentQ.options[currentQ.answerIndex];
            
            if (isCorrect) {
                score++;
            }

            // --- Logique d'Affichage du Feedback et de l'Explication ---
            feedbackMessageArea.classList.remove('hidden', 'bg-green-100', 'text-green-800', 'bg-red-100', 'text-red-800');
            
            let feedbackHtml = '';

            if (isCorrect) {
                feedbackMessageArea.classList.remove('bg-red-100', 'text-red-800', 'border-red-300');
                feedbackMessageArea.classList.add('bg-green-100', 'text-green-800', 'border-green-300');
                feedbackHtml = `Correct ! üéâ C'est la bonne r√©ponse.`;
            } else {
                feedbackMessageArea.classList.remove('bg-green-100', 'text-green-800', 'border-green-300');
                feedbackMessageArea.classList.add('bg-red-100', 'text-red-800', 'border-red-300');
                feedbackHtml = `Incorrect. ‚ùå La bonne r√©ponse √©tait : <span class="font-bold text-gray-900">"${correctAnswerText}"</span>.`;
            }

            // Ajout de l'explication
            feedbackHtml += `<p class="mt-2 pt-2 border-t border-current text-sm font-normal text-gray-700">
                                <span class="font-bold block mb-1">Explication:</span>
                                ${currentQ.explanation}
                             </p>`;

            feedbackMessageArea.innerHTML = feedbackHtml;
            // --- Fin Logique d'Affichage du Feedback ---

            // Afficher le r√©sultat sur les boutons (couleurs)
            document.querySelectorAll('.option-button').forEach((btn, index) => {
                const isUserChoice = index === selectedOptionIndex;
                const isTheCorrectAnswer = index === currentQ.answerIndex;

                btn.disabled = true; // D√©sactiver tous les boutons

                if (isTheCorrectAnswer) {
                    btn.classList.remove('selected', 'border-gray-300', 'bg-white', 'text-gray-700', 'shadow-lg', 'incorrect');
                    btn.classList.add('correct', 'shadow-md');
                } else if (isUserChoice) {
                    btn.classList.remove('selected', 'border-indigo-300', 'bg-indigo-100', 'text-indigo-800', 'shadow-lg');
                    btn.classList.add('incorrect', 'shadow-md');
                }
            });

            // Mettre √† jour le bouton de navigation
            nextButton.textContent = 'Question Suivante';
            nextButton.classList.remove('opacity-50'); // Le bouton est √† nouveau utilisable
            updateStats();
        }

        /**
         * Affiche les r√©sultats finaux.
         */
        function showResults() {
            questionArea.classList.add('hidden');
            resultsArea.classList.remove('hidden');
            // Cache le bouton "next-button" car le bouton de red√©marrage est cr√©√© dans results-area
            nextButton.classList.add('hidden'); 

            const finalScoreText = document.getElementById('final-score-text');
            const feedbackMessage = document.getElementById('feedback-message');
            const finalPercentage = Math.round((score / totalQuestions) * 100);
            
            finalScoreText.innerHTML = `Votre score final est de <span class="text-indigo-700 font-extrabold">${score} / ${totalQuestions}</span>, soit <span class="text-green-600 font-extrabold">${finalPercentage}%</span>.`;

            // Message de feedback
            let feedback = '';
            let borderColor = 'border-green-400';
            if (finalPercentage >= 85) {
                feedback = "F√©licitations ! Votre ma√Ætrise de l'analyse de Fourier est excellente. Le domaine fr√©quentiel n'a plus de secrets pour vous.";
                borderColor = 'border-green-400';
            } else if (finalPercentage >= 60) {
                feedback = "Bon travail ! Vous avez une solide compr√©hension des concepts. R√©visez les propri√©t√©s et applications pour atteindre la perfection.";
                borderColor = 'border-yellow-400';
            } else {
                feedback = "Continuez √† pratiquer ! Vous avez identifi√© les bases, mais une relecture des s√©ries et de la TF serait b√©n√©fique pour transformer vos signaux en succ√®s.";
                borderColor = 'border-red-400';
            }

            resultsArea.className = `hidden text-center p-8 bg-white rounded-xl border-4 ${borderColor}`;
            resultsArea.classList.remove('hidden');
            feedbackMessage.textContent = feedback;
            
            // Retirer tout bouton de red√©marrage existant avant d'en ajouter un nouveau (correctif)
            const existingRestartButton = resultsArea.querySelector('#restart-btn');
            if (existingRestartButton) {
                existingRestartButton.remove();
            }

            // Ajouter un bouton pour recommencer
            const restartButton = document.createElement('button');
            restartButton.id = 'restart-btn'; // Ajout d'un ID pour le rep√©rer
            restartButton.className = 'mt-6 px-8 py-3 bg-indigo-600 text-white font-bold rounded-xl hover:bg-indigo-700 transition duration-300 shadow-lg shadow-indigo-300';
            restartButton.textContent = 'Recommencer le Quiz';
            restartButton.onclick = restartQuiz;
            resultsArea.appendChild(restartButton);

            updateStats(); // Mise √† jour finale des statistiques
        }
        
        /**
         * Red√©marre le quiz.
         */
        function restartQuiz() {
            currentQuestionIndex = 0;
            score = 0;
            isAnswerSelected = false;
            selectedOptionIndex = null;
            
            // Afficher le bouton principal et le remettre dans son √©tat initial
            nextButton.classList.remove('hidden'); 
            nextButton.textContent = 'D√©marrer le Quiz'; 
            
            // R√©initialiser les zones d'introduction/r√©sultats
            sectionTitle.textContent = "Bienvenue dans le Quiz de Fourier";
            sectionDescription.textContent = "Ce quiz couvre les concepts fondamentaux de la Transformation et des S√©ries de Fourier, de leurs origines physiques √† leurs applications modernes. Cliquez sur 'D√©marrer le Quiz' pour commencer.";
            questionArea.classList.add('hidden');
            resultsArea.classList.add('hidden');
            
            // Retirer le bouton de red√©marrage cr√©√© dans la zone de r√©sultats
            const existingRestartButton = resultsArea.querySelector('#restart-btn');
            if (existingRestartButton) {
                existingRestartButton.remove();
            }
            
            updateStats();
        }

        /**
         * G√®re le clic sur le bouton "Suivant/Valider".
         */
        function handleNextClick() {
            // Utilisation de .trim() pour une comparaison de texte plus s√ªre
            const nextButtonText = nextButton.textContent.trim();
            
            // 1. Si le quiz n'a pas encore commenc√© (bouton "D√©marrer le Quiz")
            if (currentQuestionIndex === 0 && nextButtonText === 'D√©marrer le Quiz') {
                loadQuestion();
                return;
            }

            // 2. Si une r√©ponse a √©t√© valid√©e (bouton "Question Suivante")
            if (isAnswerSelected && nextButtonText === 'Question Suivante') {
                currentQuestionIndex++;
                if (currentQuestionIndex < totalQuestions) {
                    loadQuestion();
                } else {
                    showResults();
                }
            } 
            // 3. Si une option est s√©lectionn√©e mais non valid√©e (bouton "Valider la R√©ponse")
            else if (selectedOptionIndex !== null && nextButtonText === 'Valider la R√©ponse') {
                checkAnswer();
            }
        }

        // Initialisation √† la charge de la page
        document.addEventListener('DOMContentLoaded', () => {
            updateStats(); // Initialise l'affichage des stats √† 0/7
        });
    </script>
</body>
</html>
